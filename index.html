<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Odpoƒçet k prvn√≠mu pivu üç∫</title>

<style>
body {
    background: linear-gradient(45deg, #ffcc00, #ff6600);
    font-family: Comic Sans MS, cursive;
    text-align: center;
}

h1 {
    font-size: 70px;
}

table {
    margin: 30px auto;
    border-collapse: collapse;
    background: white;
    border-radius: 15px;
    overflow: hidden;
}

td, th {
    border: 1px solid #ccc;
    padding: 6px 10px;
}

button {
    padding: 4px 10px;
    cursor: pointer;
}

.msg {
    font-size: 20px;
    margin: 20px;
}
</style>
</head>

<body>

<h1 id="time">00:00:00</h1>
<p>üç∫ Odpoƒçet k prvn√≠mu pivu üç∫</p>

<h2>Luk√°≈°</h2>
<table id="lukasTable"></table>

<h2>Martin</h2>
<table id="martinTable"></table>

<div class="msg" id="msg"></div>

<h2>üìà Graf v√°hy</h2>
<iframe width="600" height="400"
src="https://thingspeak.com/channels/SEM_DEJ_CHANNEL_ID/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&type=line">
</iframe>

<script>
/************ THINGSPEAK ************/
const CHANNEL_ID = "3249143";
const WRITE_API_KEY = "H753ZAUO7U3LT3J6";

/************ HLA≈†KY ************/
const messages = [
    "Forma na l√©to se bl√≠≈æ√≠ üòé",
    "To pivo za to st√°lo üç∫",
    "Zase jsi zh≈ôe≈°il üòà",
    "Tren√©r pl√°ƒçe üò¢",
    "Kr√°sn√° pr√°ce üí™",
    "Zimn√≠ objem pokraƒçuje üê∑"
];

/************ ODPORƒåET ************/
function endOfFebruary() {
    const y = new Date().getFullYear();
    return new Date(y, 2, 0, 23, 59, 59);
}

setInterval(() => {
    const diff = endOfFebruary() - new Date();
    const h = Math.floor(diff / 1000 / 60 / 60);
    const m = Math.floor(diff / 1000 / 60) % 60;
    const s = Math.floor(diff / 1000) % 60;
    document.getElementById("time").innerText =
        `${h}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
}, 1000);

/************ TABULKY ************/
function createTable(id, name) {
    const table = document.getElementById(id);
    table.innerHTML = "<tr><th>Den</th><th>V√°ha</th><th></th></tr>";

    for (let d = 1; d <= 29; d++) {
        table.innerHTML += `
            <tr>
                <td>${d}.2.</td>
                <td><input type="number" id="${name}${d}" style="width:70px"></td>
                <td><button onclick="save('${name}',${d})">‚úî</button></td>
            </tr>`;
    }
}

createTable("lukasTable", "lukas");
createTable("martinTable", "martin");

/************ ULO≈ΩEN√ç ************/
function save(name, day) {
    const value = document.getElementById(name + day).value;
    if (!value) return alert("Zadej v√°hu");

    const field = name === "lukas" ? 1 : 2;

    fetch(`https://api.thingspeak.com/update?api_key=${WRITE_API_KEY}&field${field}=${value}&status=${name}-den-${day}`);

    document.getElementById("msg").innerText =
        messages[Math.floor(Math.random() * messages.length)];
}
</script>

</body>
</html>
