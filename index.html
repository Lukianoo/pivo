<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Odpo캜et k prvn칤mu pivu 游꽄</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="countdown">
    <h1 id="time">00:00:00</h1>
    <p>游꽄 Odpo캜et k prvn칤mu pivu 游꽄</p>
</div>

<div class="weights">

    <div class="person">
        <h2>Luk치코</h2>
        <img src="https://placekitten.com/200/200">
        <input type="date" id="lukasDate">
        <input type="number" id="lukasWeight" placeholder="V치ha (kg)">
        <button onclick="saveWeight('lukas')">Ulo쬴t</button>
        <p id="lukasSaved">---</p>
    </div>

    <div class="person">
        <h2>Martin</h2>
        <img src="https://placebear.com/200/200">
        <input type="date" id="martinDate">
        <input type="number" id="martinWeight" placeholder="V치ha (kg)">
        <button onclick="saveWeight('martin')">Ulo쬴t</button>
        <p id="martinSaved">---</p>
    </div>

</div>

<script src="script.js"></script>
</body>
</html>


body {
    background: linear-gradient(45deg, #ffcc00, #ff6600);
    font-family: Comic Sans MS, cursive;
    text-align: center;
}

#countdown h1 {
    font-size: 80px;
    margin: 20px;
}

.weights {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 40px;
}

.person {
    background: white;
    padding: 20px;
    border-radius: 20px;
    width: 260px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

img {
    width: 150px;
    border-radius: 50%;
}

input {
    display: block;
    margin: 8px auto;
}



/************ THINGSPEAK ************/
const CHANNEL_ID = "SEM_DEJ_CHANNEL_ID";
const WRITE_API_KEY = "SEM_DEJ_WRITE_API_KEY";

/************ ODPOR캛ET ************/
function getEndOfFebruary() {
    const now = new Date();
    let year = now.getFullYear();
    let end = new Date(year, 2, 0, 23, 59, 59);
    if (now > end) end = new Date(year + 1, 2, 0, 23, 59, 59);
    return end;
}

const endDate = getEndOfFebruary();

setInterval(() => {
    const diff = endDate - new Date();
    const h = Math.floor(diff / 1000 / 60 / 60);
    const m = Math.floor(diff / 1000 / 60) % 60;
    const s = Math.floor(diff / 1000) % 60;
    document.getElementById("time").innerText =
        `${h}:${m.toString().padStart(2, "0")}:${s.toString().padStart(2, "0")}`;
}, 1000);

/************ ULO콯EN칈 ************/
function saveWeight(name) {
    const weight = document.getElementById(name + "Weight").value;
    const date = document.getElementById(name + "Date").value;

    if (!weight || !date) {
        alert("Vypl켿 datum i v치hu 游땏");
        return;
    }

    const field = name === "lukas" ? 1 : 2;

    // datum po코leme jako text (ThingSpeak ho ulo쮂)
    fetch(
        `https://api.thingspeak.com/update?api_key=${WRITE_API_KEY}&field${field}=${weight}&status=${name}-${date}`
    );

    document.getElementById(name + "Saved").innerText =
        `Ulo쬰no ${date}: ${weight} kg 丘뒲잺`;
}
