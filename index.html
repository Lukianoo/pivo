<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Odpoƒçet k prvn√≠mu pivu üç∫</title>

<style>
body {
    background: linear-gradient(45deg, #ffcc00, #ff6600);
    font-family: Comic Sans MS, cursive;
    text-align: center;
}

#countdown h1 {
    font-size: 80px;
    margin: 20px;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.weights {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 40px;
    flex-wrap: wrap;
}

.person {
    background: white;
    padding: 20px;
    border-radius: 20px;
    width: 260px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    animation: wobble 3s infinite;
}

@keyframes wobble {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(1deg); }
    75% { transform: rotate(-1deg); }
}

img {
    width: 150px;
    border-radius: 50%;
}

input, button {
    display: block;
    margin: 8px auto;
    font-size: 16px;
}
</style>
</head>

<body>

<div id="countdown">
    <h1 id="time">00:00:00</h1>
    <p>üç∫ Odpoƒçet k prvn√≠mu pivu üç∫</p>
</div>

<div class="weights">

    <div class="person">
        <h2>Luk√°≈°</h2>
        <img src="https://placekitten.com/200/200">
        <input type="date" id="lukasDate">
        <input type="number" id="lukasWeight" placeholder="V√°ha (kg)">
        <button onclick="saveWeight('lukas')">Ulo≈æit</button>
        <p id="lukasSaved">---</p>
    </div>

    <div class="person">
        <h2>Martin</h2>
        <img src="https://placebear.com/200/200">
        <input type="date" id="martinDate">
        <input type="number" id="martinWeight" placeholder="V√°ha (kg)">
        <button onclick="saveWeight('martin')">Ulo≈æit</button>
        <p id="martinSaved">---</p>
    </div>

</div>

<script>
/*************************************************
 * üîë THINGSPEAK ‚Äì DOPL≈á TADY
 *************************************************/
const CHANNEL_ID = "SEM_DEJ_CHANNEL_ID";      // nap≈ô. 1234567
const WRITE_API_KEY = "SEM_DEJ_WRITE_API_KEY"; // dlouh√Ω ≈ôetƒõzec

/*************************************************
 * ‚è± ODPORƒåET DO KONCE √öNORA
 *************************************************/
function getEndOfFebruary() {
    const now = new Date();
    let year = now.getFullYear();
    let end = new Date(year, 2, 0, 23, 59, 59);
    if (now > end) end = new Date(year + 1, 2, 0, 23, 59, 59);
    return end;
}

const endDate = getEndOfFebruary();

setInterval(() => {
    const diff = endDate - new Date();
    const h = Math.floor(diff / 1000 / 60 / 60);
    const m = Math.floor(diff / 1000 / 60) % 60;
    const s = Math.floor(diff / 1000) % 60;

    document.getElementById("time").innerText =
        `${h}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
}, 1000);

/*************************************************
 * üíæ ULO≈ΩEN√ç V√ÅHY (KA≈ΩD√ù DEN = NOV√ù Z√ÅZNAM)
 *************************************************/
function saveWeight(name) {
    const weight = document.getElementById(name + "Weight").value;
    const date = document.getElementById(name + "Date").value;

    if (!weight || !date) {
        alert("Vypl≈à datum i v√°hu üòÑ");
        return;
    }

    const field = name === "lukas" ? 1 : 2;

    fetch(
        `https://api.thingspeak.com/update?api_key=${WRITE_API_KEY}&field${field}=${weight}&status=${name}-${date}`
    );

    document.getElementById(name + "Saved").innerText =
        `Ulo≈æeno ${date}: ${weight} kg ‚öñÔ∏è`;
}
</script>

</body>
</html>
